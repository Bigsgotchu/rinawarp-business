name = "rinawarp-admin-api"
main = "src/index.ts"
compatibility_date = "2025-01-01"

# Custom domain routes for API access
# These routes make the Worker available on api.rinawarptech.com
routes = [
  { pattern = "api.rinawarptech.com/api/*", zone_name = "rinawarptech.com" },
  { pattern = "api.rinawarptech.com/pricing", zone_name = "rinawarptech.com" },
]

[vars]
APP_SUCCESS_URL = "https://rinawarptech.com/success?session_id={CHECKOUT_SESSION_ID}"
APP_CANCEL_URL = "https://rinawarptech.com/pricing?canceled=1"
BILLING_PORTAL_RETURN_URL = "https://rinawarptech.com/account"
ADMIN_TOKEN = "HUNTrina12122"

# Stripe Price IDs (to be configured)
STRIPE_PRICE_STARTER_MONTHLY = "price_STARTER_MONTHLY"
STRIPE_PRICE_CREATOR_MONTHLY = "price_CREATOR_MONTHLY"
STRIPE_PRICE_PRO_MONTHLY = "price_PRO_MONTHLY"

[[d1_databases]]
binding = "DB"
database_name = "rinawarp-admin"
database_id = "a9aebfe4-f971-4865-814b-a69c0b8421a0"

# KV namespaces from credentials
[[kv_namespaces]]
binding = "DOWNLOADS_KV"
id = "1b91a65e297040fdb823d17cd124adc6"

[[kv_namespaces]]
binding = "LICENSES_KV"
id = "ecb5fdb68fdb4ce3a2d72220901e617f"

[[kv_namespaces]]
binding = "BILLING_KV"
id = "84d0fc93567e432d94b04b30e0b89e85"