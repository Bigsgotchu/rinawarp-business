<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>RinaWarp Pricing | Free, Monthly, and Lifetime</title>
    <meta
      name="description"
      content="Simple pricing for RinaWarp. Free forever, monthly tiers, and lifetime licenses."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/shared.css" />
    <style>
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 16px;
      }
      .card {
        background: #121217;
        border: 1px solid #2e2e36;
        border-radius: 14px;
        padding: 16px;
      }
      .title {
        font-size: 18px;
        font-weight: 600;
      }
      .price {
        font-size: 28px;
        font-weight: 700;
        margin: 8px 0;
      }
      .per {
        font-size: 12px;
        opacity: 0.8;
      }
      .btn {
        display: inline-block;
        padding: 10px 14px;
        border-radius: 10px;
        border: 1px solid #2e2e36;
        background: #1b1b22;
        color: #eaeaea;
        text-decoration: none;
      }
      .btn.primary {
        background: #00ffd5;
        color: #05061a;
        border-color: #00ffd5;
      }
      .muted {
        font-size: 12px;
        color: #9aa0a6;
      }
      .badge {
        display: inline-block;
        margin-left: 8px;
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid #2e2e36;
        background: #1b1b22;
        font-size: 12px;
      }
      .ribbon {
        position: absolute;
        top: 10px;
        right: -40px;
        transform: rotate(45deg);
        background: #12351f;
        color: #7cffb0;
        padding: 6px 60px;
        border: 1px solid #1f5834;
        font-size: 12px;
      }
      .highlight {
        position: relative;
        border-color: #334155;
        background: linear-gradient(135deg, rgba(255, 45, 146, 0.08), rgba(26, 233, 255, 0.06));
      }
      .row {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body class="mermaid">
    <div class="main-shell">
      <header class="rw-nav">
        <div class="rw-nav-left">
          <a class="rw-nav-logo" href="/" aria-label="RinaWarp home"
            ><img src="/assets/logo/company.png" alt="RinaWarp Logo"
          /></a>
        </div>
        <nav class="rw-nav-links">
          <a href="/">Home</a><a href="/terminal-pro.html">Terminal Pro</a>
          <a href="/music-video-creator.html">Music Video Creator</a>
          <a aria-current="page" href="/pricing.html">Pricing</a>
          <a href="/download.html">Download</a>
        </nav>
        <div class="rw-nav-cta">
          <a href="/download.html" class="rw-button-outline">Download</a>
        </div>
      </header>

      <main>
        <section class="section">
          <div class="section-header">
            <h1 class="section-title">Straightforward pricing</h1>
            <p class="section-subtitle">
              Free forever. Monthly plans. Lifetime options. Checkout via Stripe.
            </p>
          </div>

          <div id="pricingGrid" class="grid"></div>

          <div class="muted" style="margin-top: 12px">
            Prices load live from Stripe by lookup key. If unavailable, we show the fallback you
            provided.
          </div>
        </section>
      </main>

      <footer class="rw-footer">
        <div>© 2025 RinaWarp Technologies LLC. All rights reserved.</div>
        <div class="rw-footer-links">
          <a href="/terms.html">Terms</a><a href="/privacy.html">Privacy</a
          ><a href="/dmca.html">DMCA</a><a href="/contact.html">Contact</a>
        </div>
      </footer>
    </div>

    <script>
      (function () {
        const tiers = [
          // Free
          {
            id: 'free',
            label: 'Free',
            billing: 'free',
            fallback: { amount: 0, currency: 'usd' },
            features: ['Terminal core features', 'Updates', 'No card required'],
          },
          // Monthly subscriptions
          {
            id: 'basic',
            label: 'Basic',
            lookup_key: 'rw_basic_monthly',
            billing: 'monthly',
            fallback: { amount: 999, currency: 'usd' },
            features: ['Light AI usage', 'Ghost text', '1 seat'],
          },
          {
            id: 'starter',
            label: 'Starter',
            lookup_key: 'rw_starter_monthly',
            billing: 'monthly',
            fallback: { amount: 2900, currency: 'usd' },
            features: ['More AI usage', 'Workflows', '1 seat'],
          },
          {
            id: 'creator',
            label: 'Creator',
            lookup_key: 'rw_creator_monthly',
            billing: 'monthly',
            fallback: { amount: 6900, currency: 'usd' },
            features: ['High AI usage', 'Voice tools', '2 seats'],
          },
          {
            id: 'pro',
            label: 'Pro',
            lookup_key: 'rw_pro_monthly',
            billing: 'monthly',
            fallback: { amount: 9900, currency: 'usd' },
            features: ['Unlimited AI usage*', 'Priority support', '3 seats'],
            highlight: true,
          },
          // Lifetime one-time
          {
            id: 'founder',
            label: 'Founder Lifetime',
            lookup_key: 'rw_founder_lifetime',
            billing: 'one_time',
            fallback: { amount: 69900, currency: 'usd' },
            features: ['Lifetime license', 'Priority updates'],
          },
          {
            id: 'pioneer',
            label: 'Pioneer Lifetime',
            lookup_key: 'rw_pioneer_lifetime',
            billing: 'one_time',
            fallback: { amount: 80000, currency: 'usd' },
            features: ['Lifetime license', 'Priority updates'],
          },
          {
            id: 'lifetime',
            label: 'Lifetime',
            lookup_key: 'rw_lifetime',
            billing: 'one_time',
            fallback: { amount: 99900, currency: 'usd' },
            features: ['Lifetime license', 'All updates'],
          },
        ];

        const keys = tiers
          .filter((t) => t.lookup_key)
          .map((t) => t.lookup_key)
          .join(',');
        const fmt = (cents, cur) =>
          new Intl.NumberFormat(navigator.language, { style: 'currency', currency: cur }).format(
            cents / 100,
          );

        const state = { pricesByKey: {} };

        async function loadStripePrices() {
          try {
            const u = '/api/stripe/prices?keys=' + encodeURIComponent(keys) + '&_=' + Date.now();
            const r = await fetch(u, { cache: 'no-store' });
            const j = await r.json();
            if (r.ok && j.ok && Array.isArray(j.data)) {
              const map = {};
              for (const p of j.data) {
                if (p.lookup_key) map[p.lookup_key.toLowerCase()] = p;
              }
              state.pricesByKey = map;
            } else {
              state.pricesByKey = {};
            }
          } catch {
            state.pricesByKey = {};
          }
        }

        function priceFor(tier) {
          if (!tier.lookup_key)
            return {
              amount: tier.fallback.amount,
              currency: tier.fallback.currency,
              source: 'fallback',
              id: null,
              mode: null,
            };
          const p = state.pricesByKey[tier.lookup_key.toLowerCase()];
          if (p && p.active !== false) {
            const mode = p.type === 'recurring' ? 'subscription' : 'payment';
            return {
              amount: p.unit_amount,
              currency: p.currency,
              source: 'stripe',
              id: p.id,
              mode,
            };
          }
          const mode =
            tier.billing === 'monthly'
              ? 'subscription'
              : tier.billing === 'one_time'
                ? 'payment'
                : null;
          return {
            amount: tier.fallback.amount,
            currency: tier.fallback.currency,
            source: 'fallback',
            id: null,
            mode,
          };
        }

        function card(tier) {
          const { amount, currency, source, id, mode } = priceFor(tier);
          const priceText = tier.billing === 'free' ? '$0' : fmt(amount, currency);
          const per =
            tier.billing === 'monthly' ? '/month' : tier.billing === 'one_time' ? 'one-time' : '';
          const el = document.createElement('article');
          el.className = 'card' + (tier.highlight ? ' highlight' : '');
          el.innerHTML = `
          ${tier.highlight ? '<div class="ribbon">Popular</div>' : ''}
          <div class="title">${tier.label}</div>
          <div class="price">${priceText} <span class="per">${per}</span></div>
          <ul class="pricing-list" style="margin:10px 0 12px 0">
            ${tier.features.map((f) => `<li><span class="pricing-bullet"></span><span>${f}</span></li>`).join('')}
          </ul>
          <div class="row">
            ${
              tier.billing === 'free'
                ? `<a class="btn" href="/download.html">Start free</a>`
                : `<button class="btn primary" data-tier="${tier.id}" ${id ? '' : 'data-fallback="1"'}>${tier.billing === 'monthly' ? 'Subscribe' : 'Buy lifetime'}</button>`
            }
            ${source === 'fallback' && tier.billing !== 'free' ? `<span class="badge">fallback</span>` : ''}
          </div>
        `;
          // Wire checkout
          if (tier.billing !== 'free') {
            el.querySelector('button')?.addEventListener('click', async () => {
              const p = priceFor(tier);
              if (!p.id) {
                alert('Price not live in Stripe yet. Using fallback display.');
                return;
              }
              try {
                const res = await fetch('/api/stripe/checkout', {
                  method: 'POST',
                  headers: { 'content-type': 'application/json' },
                  body: JSON.stringify({ priceId: p.id, mode: p.mode }),
                });
                const j = await res.json();
                if (j.ok && j.url) location.href = j.url;
                else throw new Error(j.error || 'checkout failed');
              } catch (e) {
                alert('Checkout error. Please try again.');
              }
            });
          }
          return el;
        }

        async function render() {
          await loadStripePrices();
          const grid = document.getElementById('pricingGrid');
          grid.innerHTML = '';
          // Order: Free → monthly tiers → lifetime
          const order = (a, b) => {
            const rank = (t) => (t.billing === 'free' ? 0 : t.billing === 'monthly' ? 1 : 2);
            return rank(a) - rank(b) || (a.highlight ? -1 : 0);
          };
          tiers.sort(order).forEach((t) => grid.appendChild(card(t)));
        }
        render();
      })();
    </script>
  </body>
</html>
